# 大实验参考文档

## 介绍

大实验编译器目标：完成一个具有编译优化功能的高性能编译器。

为了简化课程实验，我们的基础实验框架在设计时并未考虑大实验的需求（例如：IR的类型系统简易）

## 参考实现进度及顺序

1. 设计IR
2. 完成前端
3. 完成后端
4. 增加中端优化和后端优化

## 评分方法

评分有两个选项：

- 选项一 完成竞赛第二阶段的优化编译器，替代期末考试
    
    成绩占比 90%，剩余 10% 为书面作业和日常成绩。

    你需要通过 stage 1 - 6 的所有测试样例以及附加测试的测试样例，这样你可以获得50%的正确性得分。剩下的40%的得分将根据你的编译器的性能进行评分。

    性能评分方案：
    附加测试中`performance`部分测试样例，以gcc打开`-O2`优化的性能的 60% 为满分，按照比例折算。如果一个程序gcc编译后运行时间为12s，如果你的程序执行时间为20s即为满分。

    你的单个测试点的得分为：

    $$
    \min\{100, 100 * GCC编译程序运行时间 * 1.25/你的程序运行时间\}
    $$

    所有测试点取**几何平均值**，最后结果 * 40% 作为你的最终性能测试成绩。

- 选项二 仅完成竞赛第一阶段（达到课程基础实验的要求）

    实验部分占比与基础实验一致，你不需要完成思考题，但是需要简单介绍你的编译器是怎么完成每一个 step 的。根据通过测试样例情况评分。

    - 完成 stage 1 - 5 实验成绩 35% ，书面作业和日常成绩10% ，期末成绩 55%。
    - 完成 stage 1 - 6 实验成绩 42% ，书面作业和日常成绩10% ，期末成绩 48%。
    - 完成 stage 1 - 7 实验成绩 50% ，书面作业和日常成绩10% ，期末成绩 40%。